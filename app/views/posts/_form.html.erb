<div class="text-center mt-5 mb-5">
  <div class="form-wrapper">
    <h4 class="form-title  mb-3"><%= @form_title %></h4>      
    <%= form_with(model: post, local: true) do |form| %>
    <% if post.errors.any? %>
        <div id="error_explanation">
            <ul>
                <% post.errors.full_messages.each do |message| %>
                <%= message %>
                <% end %>
            </ul>
        </div>
    <% end %>
    <img src="" class="img-preview">
    
    <% if post.image.attached? %>
        <div class="form-text">現在の画像</div>
        <%= image_tag post.image,class:"img-preview" %>
    <% end %>
    
    <div class="field form-group" onchange="previewFile()">
       <div class="form-text mb-3">画像を選択してください</div><br />
       <%= form.file_field :image,class:"image",id:"file" %>
    </div>
      
    <div class="field form-group">
        <div class="form-text  mb-3"><span class="badge badge-danger mr-1">※必須</span>魚種</div><br />
        <%= form.text_field :name,class:"form-control",placeholder:"カタカナで入力して下さい"%>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3"><span class="badge badge-danger">※必須</span>数量</div><br />
        <%= form.number_field :number,class:"form-control" ,value:1 %>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3">サイズ(cm)</div><br />
        <%= form.number_field :size,class:"form-control" %>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3">日付</div><br />
        <%= form.date_select :date %>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3">時間帯(時)</div><br />
        <%= form.time_select :time%>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3">説明</div><br />
        <%= form.text_field :description,class:"form-control" %>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3">使った餌</div><br />
        <%= form.select :feed, [["アオイソメ"], ["ゴカイ"],["オキアミ"],["カニ"],["貝"],["配合エサ"],["ミミズ"],["アカムシ"],["練エサ"],["ルアー"]],:prompt => "エサを選択してください" %>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3">天気</div><br />
        <%= form.select :weather, [["晴れ"], ["曇り"],["雨"],["その他"]],:prompt => "天気を選択してください" %>
    </div>
    
    <div class="field form-group">
        <div class="form-text  mb-3"><span class="badge badge-danger mr-1">※必須</span>場所</div><br />
        <%= form.text_field :address,class:"form-control" %>
    </div>
    
    <div data-toggle="modal" data-target="#modal1" class="btn btn-info mt-3 mb-3">
      地図で場所を選択する
    </div>
    
    <div class="actions">
        <%= form.submit value="登録する",class:"btn-lg btn-info mt-4 m-4"%>
        </div>
    <% end %>
  </div>    
</div> 


<div class="select-map">
    <div class="modal fade" id="modal1" tabindex="-1"
    role="dialog" aria-labelledby="label1" aria-hidden="true" class="mx-auto">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title " id="label1">地図で場所を選択</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="fishing-map" id="map" style='width: 100%; height: 550px;'></div>
                <script type="text/javascript">
                            handler = Gmaps.build('Google');
                            handler.buildMap({ provider: { scrollwheel: false }, internal: {id: 'map'}}, function(){
                            handler.fitMapToBounds();
                            var latlng = new google.maps.LatLng(<%= @user.latitude %>,<%= @user.longitude %>); 
                            handler.getMap().setCenter(latlng);
                            handler.getMap().setZoom(8);
                            });
                </script>
            </div>
                <div class="modal-footer">
                    <button type="button" class="btn-sm btn-info" data-dismiss="modal">閉じる</button>
                </div>
            </div>
        </div>
    </div>
</div>